#!/bin/bash
# REFERÃŠNCIA RÃPIDA - CHAVESPORTO
# ================================

# ğŸš€ INICIAR SISTEMA
=====================================

# Terminal 1 - Backend
cd chavesporto
npm run dev

# Terminal 2 - Frontend
nada (jÃ¡ estÃ¡ sendo servido por http://localhost:3000)

# ğŸŒ ACESSAR
=====================================

# Dashboard (Instructor)
http://localhost:3000/dashboard

# Admin Panel (Admin)
http://localhost:3000/admin

# Login PadrÃ£o - Instructor
MatrÃ­cula: 3-02919
Senha: senai123

# Login Admin
Email: admin@senai.com.br
Senha: admin123


# ğŸ§ª TESTES RÃPIDOS
=====================================

# Ciclo completo (Retirar â†’ Devolver â†’ Verificar)
node scripts/test-complete-cycle.js

# Verificar histÃ³rico
node scripts/test-authenticated-history.js

# Teste de devoluÃ§Ã£o simples
node scripts/test-return-key-simple.js

# Teste de retirada
node scripts/test-live-withdraw.js


# ğŸ“Š MONITORAMENTO
=====================================

# Ver logs do backend
Ctrl+C para parar, npm run dev para reiniciar

# Ver logs do frontend (Browser Console)
F12 â†’ Console tab â†’ Buscar por ğŸ”„ Dashboard auto-refresh

# Ver banco de dados (Supabase)
https://supabase.com â†’ seu-projeto â†’ SQL Editor


# ğŸ”§ CONFIGURAÃ‡Ã•ES RÃPIDAS
=====================================

# Auto-refresh interval
Frontend/js/admin.js linha 50:
  setInterval(() => { loadDashboardData(); }, 15000); // 15 segundos

# Fuso horÃ¡rio
Frontend/js/timezone.js:
  timeZone: 'America/Sao_Paulo' // BrasÃ­lia


# ğŸ“ ARQUIVOS PRINCIPAIS
=====================================

Backend:
  backend/controllers/keyController.js â† LÃ³gica de retirada/devoluÃ§Ã£o
  backend/controllers/historyController.js â† Visualizar histÃ³rico
  backend/utils/dateNormalizer.js â† Converte datas Supabase

Frontend:
  frontend/js/admin.js â† Admin panel + auto-refresh
  frontend/js/dashboard.js â† Dashboard instructor + auto-refresh
  frontend/js/timezone.js â† FormataÃ§Ã£o de datas para BrasÃ­lia
  frontend/css/admin.css â† Estilos admin


# ğŸŸ¢ FEATURES IMPLEMENTADAS
=====================================

âœ… Auto-refresh Dashboard (15s)
âœ… Auto-refresh Admin Panel (15s)
âœ… Admin consegue devolver qualquer chave
âœ… HistÃ³rico sincroniza apÃ³s devoluÃ§Ã£o
âœ… Datas em timezone BrasÃ­lia
âœ… Fallback para coluna observation ausente


# âŒ SE ALGO NÃƒO FUNCIONAR
=====================================

Erro: "Cannot find /history"
â†’ npm run dev (reiniciar backend)

Erro: "Token invÃ¡lido"
â†’ Fazer login novamente

Erro: 500 na devoluÃ§Ã£o
â†’ Backend crashed? Verificar console do servidor

HistÃ³rico nÃ£o atualiza:
â†’ Aguardar 15 segundos (auto-refresh)
â†’ Ou F5 para refresh manual

Timeline/datas erradas:
â†’ Verificar System Time (Windows Settings)
â†’ Ou fazer reset de cache: Ctrl+Shift+Delete


# ğŸ“ CONTATO
=====================================

Sistema: CHAVESPORTO v2.0
Ãšltima atualizaÃ§Ã£o: Fevereiro 2026
Status: âœ… 100% OPERACIONAL

