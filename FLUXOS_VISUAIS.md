# ğŸ¨ FLUXOS VISUAIS - Sistema de Bloqueio de Ambiente

## 1ï¸âƒ£ FLUXO: UsuÃ¡rio Normal Consultando Bloqueios

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USUÃRIO NORMAL                                             â”‚
â”‚  http://localhost:3000/reservar-chave.html                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ PÃ¡gina Carrega               â”‚
          â”‚ âœ… CalendÃ¡rio visÃ­vel       â”‚
          â”‚ âœ… BotÃ£o toggle NÃƒO aparece â”‚
          â”‚ âœ… FormulÃ¡rio reserva ativo â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Seleciona Ambiente           â”‚
          â”‚ (ex: Lab-04 - Inovar)       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ CalendÃ¡rio Atualiza          â”‚
          â”‚ â€º Dias normais: branco       â”‚
          â”‚ â€º Dias bloqueados: ROSA ğŸ’—   â”‚
          â”‚ â€º Ãcone ğŸ“‹ em dias bloqueados
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Mouse sobre dia bloqueado (ROSA)     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ âœ¨ TOOLTIP APARECE                         â”‚
          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚ â”‚ ğŸ‘¨â€ğŸ« RESERVADO                        â”‚  â”‚
          â”‚ â”‚ Instrutor: Mauricio Davel           â”‚  â”‚
          â”‚ â”‚ Turma: Lab-04 - Inovar               â”‚  â”‚
          â”‚ â”‚ Turno: vespertino (13:30 - 17:30)   â”‚  â”‚
          â”‚ â”‚ Status: âœ… Confirmado                â”‚  â”‚
          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Tenta reservar na data bloqueada     â”‚
          â”‚ (ex: seleciona 18-22 marÃ§o)         â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ âŒ ERRO - Bloqueio Detectado              â”‚
          â”‚ "Erro: Ambiente bloqueado neste perÃ­odo  â”‚
          â”‚  de 15 a 20 de marÃ§o"                    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Reserva NÃƒO Ã© criada                 â”‚
          â”‚ PerÃ­odo permanece indisponÃ­vel       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ RESULTADO: UsuÃ¡rio informado e protegido âœ…
```

---

## 2ï¸âƒ£ FLUXO: Admin Criando Bloqueio

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN                                                      â”‚
â”‚  http://localhost:3000/reservar-chave.html?admin=true       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ PÃ¡gina Carrega em Modo Admin     â”‚
          â”‚ âœ… BotÃ£o ğŸ”’ aparece em LARANJA  â”‚
          â”‚ âœ… CalendÃ¡rio + FormulÃ¡rio       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Clica: ğŸ”’ Criar Bloqueio           â”‚
          â”‚ "â† Voltar para Reservas"           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  
                  â”‚ ANIMAÃ‡ÃƒO SLIP  â”‚
                  â”‚ Form rÃ©serva   â”‚
                  â”‚ some logo      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ ğŸ“‹ FORM DE BLOQUEIO APARECE            â”‚
          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚ â”‚ ğŸ”’ Criar Bloqueio de Ambiente   â”‚  â”‚
          â”‚ â”‚                                 â”‚  â”‚
          â”‚ â”‚ ğŸ’¡ InformaÃ§Ãµes:                 â”‚  â”‚
          â”‚ â”‚ â€¢ Bloqueios impedem reservas    â”‚  â”‚
          â”‚ â”‚ â€¢ Escolha datas e tipo         â”‚  â”‚
          â”‚ â”‚ â€¢ Descreva o motivo             â”‚  â”‚
          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ PREENCHE FORMULÃRIO                    â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚ Campo 1: Ambiente                      â”‚
          â”‚ [â–¼ Lab-02 - Criar]                    â”‚
          â”‚                                        â”‚
          â”‚ Campo 2: Data InÃ­cio    Data Fim       â”‚
          â”‚ [2026-03-15]            [2026-03-20]  â”‚
          â”‚                                        â”‚
          â”‚ Campo 3: Turno                         â”‚
          â”‚ â—‰ Integral                             â”‚
          â”‚                                        â”‚
          â”‚ Campo 4: Tipo de Bloqueio              â”‚
          â”‚ â—‰ ğŸ”§ ManutenÃ§Ã£o                      â”‚
          â”‚                                        â”‚
          â”‚ Campo 5: Motivo                        â”‚
          â”‚ [ManutenÃ§Ã£o preventiva...]             â”‚
          â”‚                                        â”‚
          â”‚ [ğŸ”’ Criar Bloqueio] [âŒ Cancelar]    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Clica: ğŸ”’ Criar Bloqueio               â”‚
          â”‚ Envio para API                         â”‚
          â”‚ POST /api/reservations/blockout        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    VALIDAÃ‡Ã•ES NO BACKEND          â”‚
        â”‚ 1ï¸âƒ£ Verifica token âœ…              â”‚
        â”‚ 2ï¸âƒ£ Verifica admin âœ…              â”‚
        â”‚ 3ï¸âƒ£ Valida datas âœ…               â”‚
        â”‚ 4ï¸âƒ£ Verifica conflitos âœ…          â”‚
        â”‚ 5ï¸âƒ£ Insere no DB âœ…               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ â³ LOADING    â”‚
                  â”‚ Spinner...    â”‚
                  â”‚ Criando...    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ âœ… SUCESSO - Modal Aparece                â”‚
          â”‚ "âœ… Bloqueio Criado com Sucesso!"        â”‚
          â”‚ "PerÃ­odo: 2026-03-15 a 2026-03-20"       â”‚
          â”‚ [OK]                                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Form Fecha, Volta para Reservas        â”‚
          â”‚ CalendÃ¡rio ATUALIZA AUTOMATICAMENTE    â”‚
          â”‚                                        â”‚
          â”‚ ğŸ“… Dias 15-20 AGORA em ROSA ğŸ’—        â”‚
          â”‚ ğŸ“… Ãcone ğŸ“‹ em cada dia               â”‚
          â”‚                                        â”‚
          â”‚ Tooltip mostra:                        â”‚
          â”‚ â€¢ Instrutor: Admin que criou           â”‚
          â”‚ â€¢ Turma: Lab-02 - Criar                â”‚
          â”‚ â€¢ Turno: Integral                      â”‚
          â”‚ â€¢ Status: âœ… Confirmado                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ RESULTADO: Bloqueio criado e ativo âœ…
```

---

## 3ï¸âƒ£ FLUXO: ValidaÃ§Ã£o de Conflitos

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ADMIN CRIOU BLOQUEIO â”‚
                    â”‚ 15-20 marÃ§o          â”‚
                    â”‚ Lab-02              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ USUÃRIO TENTA       â”‚
                    â”‚ RESERVAR 18-22      â”‚
                    â”‚ Lab-02              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ BACKEND VALIDA             â”‚
                â”‚                             â”‚
                â”‚ Procura overlaps:            â”‚
                â”‚ Bloqueio: 15-20              â”‚
                â”‚ Reserva: 18-22              â”‚
                â”‚ Overlap: âœ… ENCONTRADO      â”‚
                â”‚                             â”‚
                â”‚ (Dias 18, 19, 20            â”‚
                â”‚  estÃ£o em ambos)            â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ CONFLITO DETECTADO        â”‚
             â”‚ Status: 409 Conflict      â”‚
             â”‚ Message: "Ambiente        â”‚
             â”‚ bloqueado de 15 a 20"    â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ FRONTEND EXIBE      â”‚
                â”‚                      â”‚
                â”‚ âŒ ERRO             â”‚
                â”‚ "PerÃ­odo            â”‚
                â”‚  indisponÃ­vel"      â”‚
                â”‚                      â”‚
                â”‚ Reserva NÃƒO criada  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ RESULTADO: Conflito prevenido âœ…
```

---

## 4ï¸âƒ£ FLUXO: Estrutura de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BANCO DE DADOS (Supabase PostgreSQL)        â”‚
â”‚ Tabela: key_reservations                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ COLUNA: reservation_type       â”‚
          â”‚ Tipo: VARCHAR(20)              â”‚
          â”‚ PadrÃ£o: 'normal'               â”‚
          â”‚ Valores: 'normal' | 'blockout' â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                   â”‚
                â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RESERVA NORMAL    â”‚  â”‚ BLOQUEIO         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ type: 'normal'    â”‚  â”‚ type: 'blockout' â”‚
    â”‚ instructor: JoÃ£o  â”‚  â”‚ instructor: Adminâ”‚
    â”‚ turma: DDS-29     â”‚  â”‚ turma: BLOQUEIO: â”‚
    â”‚ shift: noturno    â”‚  â”‚        manutenÃ§Ã£oâ”‚
    â”‚ status: approved  â”‚  â”‚ shift: integral  â”‚
    â”‚                   â”‚  â”‚ status: approved â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ” ÃNDICE CRIADO:
   idx_key_reservations_type_date
   (reservation_type, start_date, end_date)
   ^ Acelera buscas de bloqueios
```

---

## 5ï¸âƒ£ FLUXO: Visual UI/UX

### Dia Normal
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    15   â”‚
â”‚         â”‚
â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Fundo: branco
Texto: preto
Border: cinza
```

### Dia Bloqueado
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    15 ğŸ“‹â”‚
â”‚ ^^^^^^^ â”‚  Gradiente rosa
â”‚ ^^^^^^^ â”‚  #ffcccc
â”‚ â–¼â–¼â–¼â–¼â–¼â–¼â–¼â”‚  #d32f2f border
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Mouse over:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨â€ğŸ« RESERVADO         â”‚
â”‚ Instrutor: JoÃ£o      â”‚
â”‚ Turma: Lab-04        â”‚
â”‚ Turno: Vespertino    â”‚
â”‚ Status: âœ… Confirmadoâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Background: rgba(0,0,0,0.95)
Text: #FFD700 (ouro)
Border: #FFD700
```

---

## 6ï¸âƒ£ FLUXO: Tipos de Bloqueio

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TIPOS DE BLOQUEIO DISPONÃVEIS            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”§ MANUTENÃ‡ÃƒO
â”œâ”€ Uso: ServiÃ§o tÃ©cnico, reparo
â”œâ”€ Cor: Amarelo/Laranja
â””â”€ DuraÃ§Ã£o: Horas a dias

ğŸ“¢ EVENTO INTERNO
â”œâ”€ Uso: ReuniÃ£o, treinamento da empresa
â”œâ”€ Cor: Roxo
â””â”€ DuraÃ§Ã£o: Horas a dias

ğŸ¢ EVENTO EXTERNO
â”œâ”€ Uso: Visitantes, eventos pÃºblico
â”œâ”€ Cor: Azul claro
â””â”€ DuraÃ§Ã£o: Horas a dias
```

---

## 7ï¸âƒ£ FLUXO: States da AplicaÃ§Ã£o

```
ESTADO GLOBAL DA APP
â”‚
â”œâ”€ isAdminMode: boolean
â”‚  â”œâ”€ true  â†’ Mostra toggle + form de bloqueio
â”‚  â””â”€ false â†’ Oculta toggle + mostra form reserva
â”‚
â”œâ”€ blockedDates: Map
â”‚  â”œâ”€ Key: "2026-03-15"
â”‚  â””â”€ Value: {instructor, turma, shift, status}
â”‚
â”œâ”€ selectedEnvironment: string
â”‚  â””â”€ ID do ambiente selecionado
â”‚
â””â”€ token: string (JWT)
   â””â”€ Armazenado em localStorage
```

---

## 8ï¸âƒ£ FLUXO: SeguranÃ§a & AutenticaÃ§Ã£o

```
REQUEST: POST /api/reservations/blockout
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. verifyToken Middleware  â”‚
    â”‚    Valida JWT no header    â”‚
    â”‚    Extrai userId           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          âœ… ou âŒ
          â”‚      â”‚
      âœ…  â”‚      â”‚  âŒ
         â”‚      â””â”€â†’ 401 Unauthorized
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. verifyAdmin Middleware  â”‚
    â”‚    Checa role = 'admin'    â”‚
    â”‚    na tabela users         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          âœ… ou âŒ
          â”‚      â”‚
      âœ…  â”‚      â”‚  âŒ
         â”‚      â””â”€â†’ 403 Forbidden
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. Controller Handler      â”‚
    â”‚    Valida input            â”‚
    â”‚    Busca conflitos         â”‚
    â”‚    Insere no DB            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          âœ… ou âŒ
          â”‚      â”‚
      âœ…  â”‚      â”‚  âŒ
         â”‚      â”‚  â””â†’ 409 Conflict
         â”‚      â”‚  â””â†’ 400 Bad Request
         â”‚      â”‚  â””â†’ 500 Server Error
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 201 Created                â”‚
    â”‚ { success, reservation }   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Paleta de Cores

```
ğŸŸ¤ Bloqueio em Fundo:
   Background: linear-gradient(#ffcccc â†’ #ffdddd)
   Border: #d32f2f (vermelho)
   Text: #d32f2f (vermelho)

ğŸŸ¡ Tooltip:
   Background: rgba(0,0,0,0.95) (preto semi)
   Text principal: #FFD700 (ouro)
   Text secundÃ¡rio: #fff (branco)
   Border: #FFD700 (ouro)

ğŸŸ  Form Bloqueio:
   Background: linear-gradient(#fff3e0 â†’ #ffe0b2)
   Border-left: #ff6f00 (laranja)
   BotÃµes: linear-gradient(#ff6f00 â†’ #ff8f00)

ğŸŒ¿ Buttons:
   Primary: #ff6f00 (laranja)
   Secondary: #e9ecef (cinza claro)
   Hover: transform translateY(-2px) + shadow
```

---

**VisualizaÃ§Ã£o completa do sistema de bloqueio de ambientes** âœ…

